<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Tree View: PR-1 Location List -->
    <record id="view_stock_location_occupancy_tree" model="ir.ui.view">
        <field name="name">stock.location.occupancy.tree</field>
        <field name="model">stock.location</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <tree string="PR-1 Location Occupancy" 
                  create="false" 
                  delete="false"
                  decoration-success="occupancy_status == 'free'"
                  decoration-warning="occupancy_status == 'reserved'"
                  decoration-danger="occupancy_status == 'occupied'">
                <field name="name" string="Location"/>
                <field name="pr1_zone" string="Zone"/>
                <field name="occupancy_status" string="Status" invisible="0"/>
                <field name="occupancy_order_name" string="Order"/>
                <field name="occupancy_transport_unit" string="Transport Box"/>
                <field name="occupancy_customer" string="Customer"/>
                <field name="occupancy_duration_hours" string="Duration (h)" widget="float_time"/>
            </tree>
        </field>
    </record>
    
    <!-- Search View: Filters -->
    <record id="view_stock_location_occupancy_search" model="ir.ui.view">
        <field name="name">stock.location.occupancy.search</field>
        <field name="model">stock.location</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <search string="Location Occupancy">
                <field name="name"/>
                <separator/>
                <filter name="filter_free" string="Free" domain="[('occupancy_status', '=', 'free')]"/>
                <filter name="filter_reserved" string="Reserved" domain="[('occupancy_status', '=', 'reserved')]"/>
                <filter name="filter_occupied" string="Occupied" domain="[('occupancy_status', '=', 'occupied')]"/>
                <separator/>
                <filter name="filter_not_free" string="Reserved or Occupied" domain="[('occupancy_status', 'in', ['reserved', 'occupied'])]"/>
                <separator/>
                <group string="Group By">
                    <filter name="group_status" string="Status" context="{'group_by': 'occupancy_status'}"/>
                    <filter name="group_zone" string="Zone" context="{'group_by': 'pr1_zone'}"/>
                </group>
            </search>
        </field>
    </record>
    
    <!-- Action: Open PR-1 Location Occupancy -->
    <record id="action_location_occupancy" model="ir.actions.act_window">
        <field name="name">PR-1 Location Occupancy</field>
        <field name="res_model">stock.location</field>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_stock_location_occupancy_tree"/>
        <field name="search_view_id" ref="view_stock_location_occupancy_search"/>
        <field name="domain">[('is_pr1_location', '=', True)]</field>
        <field name="context">{'search_default_filter_not_free': 1}</field>
    </record>

</odoo>
